<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Requizzle</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="classRequizzle.html">Requizzle</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.com/hegemonic/requizzle"><object type="image/svg+xml" data="https://travis-ci.com/hegemonic/requizzle.svg?branch=master" style="pointer-events: none;">Build Status</object></a></p>
<p>Swizzle a little something into your Node.js modules.</p>
<h1><a class="anchor" id="autotoc_md1518"></a>
What's Requizzle?</h1>
<p><a class="el" href="classRequizzle.html">Requizzle</a> provides a drop-in replacement for Node.js's <code><a class="el" href="dist_2markdown-it_8js.html#a4b4eb847520ff4e45de16db801e26133">require()</a></code> function. This replacement enables you to change a module's source code when Node.js loads the module.</p>
<p>You can use <a class="el" href="classRequizzle.html">Requizzle</a> in your test cases, or in production code if you like to live dangerously.</p>
<h1><a class="anchor" id="autotoc_md1519"></a>
How can I change a module with Requizzle?</h1>
<p>There are several different ways:</p>
<h2><a class="anchor" id="autotoc_md1520"></a>
Look for modules in new places</h2>
<p>With <a class="el" href="classRequizzle.html">Requizzle</a>, you can add directories to the module lookup path, which forces Node.js to search those directories for modules. This can be useful if:</p>
<ul>
<li>You're tired of writing code like &lsquo;require(&rsquo;../../../../../lib/foo')`.</li>
<li>You want to expose your app's modules to external plugins.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1521"></a>
Add code before or after the module's source code</h2>
<p>Tamper with modules to your heart's delight by adding arbitrary code before or after the module's own source code.</p>
<h2><a class="anchor" id="autotoc_md1522"></a>
Mess with child modules</h2>
<p>When you use <a class="el" href="classRequizzle.html">Requizzle</a> to require a module, you can force each child module's <code>require</code> method to inherit your changes to the parent module. (By default, only the parent module is changed.)</p>
<h1><a class="anchor" id="autotoc_md1523"></a>
Will Requizzle break my dependencies?</h1>
<p>Probably not. It's true that <a class="el" href="classRequizzle.html">Requizzle</a> gives you plenty of new and exciting ways to tamper with, and possibly break, your module dependencies. But <a class="el" href="classRequizzle.html">Requizzle</a> also tries not to break anything on its own. In particular:</p>
<ul>
<li><b><a class="el" href="classRequizzle.html">Requizzle</a> preserves strict-mode declarations</b>. If a module starts with a strict-mode declaration, <a class="el" href="classRequizzle.html">Requizzle</a> keeps it in place. Your changes will appear after the strict-mode declaration.</li>
<li><b><a class="el" href="classRequizzle.html">Requizzle</a> leaves native modules alone</b>. If you use <a class="el" href="classRequizzle.html">Requizzle</a> to load one of Node.js's built-in modules, such as <code>fs</code> or <code>path</code>, <a class="el" href="classRequizzle.html">Requizzle</a> won't mess with it.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1524"></a>
Usage</h1>
<p>The <a class="el" href="classRequizzle.html">Requizzle</a> module exports a single function, which returns a drop-in replacement for <code><a class="el" href="dist_2markdown-it_8js.html#a4b4eb847520ff4e45de16db801e26133">require()</a></code>.</p>
<p>When you call the function, you must pass in an <code>options</code> object, which can include any of these properties:</p>
<ul>
<li><code>extras</code>: A pair of functions that return text to insert before or after the module's source code. Each function accepts two parameters: <code>targetPath</code>, the path to the required module, and <code>parentModule</code>, the <code>Module</code> object for the module's parent. Each function must return a string.<ul>
<li><code>extras.before</code>: A function that returns text to insert before the module's source code.</li>
<li><code>extras.after</code>: A function that returns text to insert after the module's source code.</li>
</ul>
</li>
<li><code>infect</code>: Determines whether child modules are infected with the same changes as the parent module. Set to <code>true</code> to force child modules to inherit your changes. Defaults to <code>false</code>.</li>
<li><code>requirePaths</code>: Additional paths to search for required modules. For example, if <code>requirePaths</code> is set to &lsquo;[&rsquo;/usr/lib/junk/modules']<code>, and you save a JavaScript module at</code>/usr/lib/junk/modules/mymodule.js<code>, you can require the module as</code>mymodule`. <pre class="fragment">You can provide an array of paths, which will be searched before the default
module paths, or an object with the following properties:

+ `requirePaths.before`: An array of paths to search before the default
module paths.
+ `requirePaths.after`: An array of paths to search after the default module
paths. Use this property if you want the module to use its own local
dependencies when possible, then fall back to the additional paths if
necessary.

By default, the require path is not changed.
</pre></li>
</ul>
<h1><a class="anchor" id="autotoc_md1525"></a>
Examples</h1>
<p>``&lsquo;js const requizzle = require('requizzle&rsquo;);</p>
<p>// Say hello and goodbye to each module. const logRequire = requizzle({ extras: { before: function(targetPath, parentModule) { return 'console.log("Hello %s!", ' + targetPath + ');<br  />
'; }, after: function(targetPath, parentModule) { return 'console.log("Goodbye %s!", ' + targetPath + ');<br  />
'; } } }); // Prints "Hello /path/to/mymodule.js!" and "Goodbye /path/to/mymodule.js!" const myModule = logRequire('mymodule');</p>
<p>// Look for modules in the current module's <code>lib</code> directory, and force child // modules to do the same. const path = require('path'); const extraPathRequire = requizzle({ infect: true, requirePaths: [path.join(__dirname, 'lib')] }); // If <code>foo</code> needs to require a module in <code>./lib</code>, it can use &lsquo;require('bar&rsquo;)<code> // instead of</code>require('./lib/bar')&lsquo;. const foo = extraPathRequire(&rsquo;./foo'); ```</p>
<h1><a class="anchor" id="autotoc_md1526"></a>
Troubleshooting</h1>
<p>Here are some problems you might run into when you use <a class="el" href="classRequizzle.html">Requizzle</a>, along with solutions to each problem. If you run into any problems that aren't addressed here, please file a new issue!</p>
<h2><a class="anchor" id="autotoc_md1527"></a>
Requizzle slowed down my code! A lot!</h2>
<p><a class="el" href="classRequizzle.html">Requizzle</a> adds minimal overhead to the module-loading process. However, your code will run <em>much</em> slower than usual if you do both of the following:</p>
<ul>
<li>Use <a class="el" href="classRequizzle.html">Requizzle</a>'s <code>infect</code> option.</li>
<li>Require modules that have a lot of <code><a class="el" href="dist_2markdown-it_8js.html#a4b4eb847520ff4e45de16db801e26133">require()</a></code> calls within the scope of individual functions.</li>
</ul>
<p>If <a class="el" href="classRequizzle.html">Requizzle</a> seems to slow down your app, look for module calls that are within function scope, then move them to each module's top-level scope.</p>
<h2><a class="anchor" id="autotoc_md1528"></a>
Requizzle made my module do something weird!</h2>
<p>Do you have any <a href="https://nodejs.org/api/modules.html#modules_cycles">circular dependencies</a> in the modules that aren't working? Circular dependencies can cause unusual behavior with <a class="el" href="classRequizzle.html">Requizzle</a>, just as they can without <a class="el" href="classRequizzle.html">Requizzle</a>. Try breaking the circular dependency.</p>
<h2><a class="anchor" id="autotoc_md1529"></a>
Requizzle violates the &lt;a href="https://en.wikipedia.org/wiki/Law_of_Demeter"&gt;Law of Demeter&lt;/a&gt;! It's an unnatural abomination!</h2>
<p>Fair enough.</p>
<h1><a class="anchor" id="autotoc_md1530"></a>
Changelog</h1>
<ul>
<li>0.2.3 (July 2019): Updated dependencies.</li>
<li>0.2.2 (May 2019): Fixed a compability issue with Node.js 12.</li>
<li>0.2.1 (December 2014): The <code>requirePaths</code> option no longer inserts an extra line break into the source file.</li>
<li>0.2.0 (June 2014): The <code>requirePaths</code> option can now contain <code>before</code> and <code>after</code> properties. Paths in the <code>before</code> property will be searched first; paths in the <code>after</code> property will be searched last.</li>
<li>0.1.1 (June 2014): If the <code>requirePaths</code> option is used, the module loader now searches the extra paths first rather than last.</li>
<li>0.1.0 (June 2014): Initial release.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1531"></a>
Acknowledgements</h1>
<p><a class="el" href="classRequizzle.html">Requizzle</a> is very loosely adapted from Johannes Ewald's <a href="https://github.com/jhnns/rewire">rewire</a> module, which is designed to modify a module's behavior for unit testing. If <a class="el" href="classRequizzle.html">Requizzle</a> doesn't meet your needs, please take a look at rewire!</p>
<h1><a class="anchor" id="autotoc_md1532"></a>
License</h1>
<p>[MIT license](LICENSE). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
