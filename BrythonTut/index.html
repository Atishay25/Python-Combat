<html>

<head>
    <meta charset="utf-8">
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/brython@3.11.0/brython.min.js">
    </script>
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/brython@3.11.0/brython_stdlib.js">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>

<body onload="brython()">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<script type="text/javascript">
    change = {surface: function(r, p){
        if(r == 1){
            var s = parseFloat($('#move').css("top"));
            if(s >= 100){
                alert('Dont move out of arena');
                location.reload();
                return -1;
            }
            else if(p == 0){
                return 0;
            }
            else{
                $('#move').animate({top: '+=10px'}, function(){change.surface(r,p-1)});
                s = s + 10;
                console.log($('#move').queue.length)
            }
        }
        if(r == 2){
            var s = parseFloat($('#move').css("top"));
            if(s <= 0){
                alert('Dont move out of arena');
                location.reload();
                return -1;
            }
            else{
                $('#move').animate({top: '-=10px'}, function(){change.surface(r,p-1)});
                s = s - 10;
                console.log($('#move').queue.length)
            }
        }
        if(r == 3){
            var s = parseFloat($('#move').css("left"));
            if(s >= 100){
                alert('Dont move out of arena');
                location.reload();
                return -1;
            }
            else{
                $('#move').animate({left: '+=10px'}, function(){change.surface(r,p-1)});
                s = s + 10;
                console.log($('#move').queue.length)
            }
            return 0;
        }
        if(r == 4){
            var s = parseFloat($('#move').css("left"));
            if(s <= 0){
                alert('Dont move out of arena');
                location.reload();
                return -1;
            }
            else{
                $('#move').animate({left: '-=10px'}, function(){change.surface(r,p-1)});
                s = s - 10;
                console.log($('#move').queue.length)
            }
            return 0;
        }
    }}
</script>
<script type="text/python">
from browser import document, alert, timer, window
import time
import traceback
import re
jq = window.jQuery
def mult(e):
    s = str(document['line-input'].value)
    try:
        exec(s)
    except Exception as e:
        print(traceback.format_exc())
        s1 = traceback.format_exc()
        print(s1)
        s = traceback.format_exc().split('last):')
        error_msg = s[1].replace("File \"<string>\", ", '')
        alert(error_msg)
        #error_msg = 'line no : '
        #for i in s:
        #    print(i)
        #number = s[3]
        #error = s[-2]
        #print(number, error)
        #y = [s for s in re.findall(r'-?\d+\.?\d*', number)]
        #error_msg += y[0]
        #error_msg = error_msg + "\n" + error
        #alert(error_msg)

def up(e):
    v = window.change.surface(2,e)
    if(v == -1):
        alert("I cant go there")
        window.location.reload()
def down(e):
    v = window.change.surface(1,e)
    if(v == -1):
        alert("I cant go there")
        window.location.reload()
def left(e):
    v = window.change.surface(4,e)
    if(v == -1):
        alert("I cant go there")
        window.location.reload()
def right(e):
    v = window.change.surface(3,e)
    if(v == -1):
        alert("I cant go there")
        window.location.reload()
document['button-addon2'].bind("click", mult)
document['up'].bind("click", up)


</script>
<div class="input-group mb-3">
    <textarea name="" id="line-input" cols="30" rows="10"></textarea>>
    <button class="btn btn-outline-secondary" type="button" id="button-addon2">Run</button>
    <button class="btn btn-outline-secondary" type="button" id="up">up</button>
    <button class="btn btn-outline-secondary" type="button" id="left">left</button>
    <button class="btn btn-outline-secondary" type="button" id="right">right</button>
    <button class="btn btn-outline-secondary" type="button" id="down">down</button>
</div>

<div id="move" style="background-color: skyblue; width: 10px; height: 10px; left: 0px; top: 0px; position: relative;" >
</div>
<div id="textdata" style="position:absolute; top:-100px; left:-100px">I cant go there</div>
</body>
<h2 id="output"></h2>
</html>