\href{https://travis-ci.com/hegemonic/requizzle}{\texttt{ }}

Swizzle a little something into your Node.\+js modules.\hypertarget{md_node_modules_requizzle_README_autotoc_md792}{}\doxysection{What\textquotesingle{}s Requizzle?}\label{md_node_modules_requizzle_README_autotoc_md792}
\mbox{\hyperlink{classRequizzle}{Requizzle}} provides a drop-\/in replacement for Node.\+js\textquotesingle{}s {\ttfamily require()} function. This replacement enables you to change a module\textquotesingle{}s source code when Node.\+js loads the module.

You can use \mbox{\hyperlink{classRequizzle}{Requizzle}} in your test cases, or in production code if you like to live dangerously.\hypertarget{md_node_modules_requizzle_README_autotoc_md793}{}\doxysection{How can I change a module with Requizzle?}\label{md_node_modules_requizzle_README_autotoc_md793}
There are several different ways\+:\hypertarget{md_node_modules_requizzle_README_autotoc_md794}{}\doxysubsection{Look for modules in new places}\label{md_node_modules_requizzle_README_autotoc_md794}
With \mbox{\hyperlink{classRequizzle}{Requizzle}}, you can add directories to the module lookup path, which forces Node.\+js to search those directories for modules. This can be useful if\+:


\begin{DoxyItemize}
\item You\textquotesingle{}re tired of writing code like `require('../../../../../lib/foo\textquotesingle{})\`{}.
\item You want to expose your app\textquotesingle{}s modules to external plugins.
\end{DoxyItemize}\hypertarget{md_node_modules_requizzle_README_autotoc_md795}{}\doxysubsection{Add code before or after the module\textquotesingle{}s source code}\label{md_node_modules_requizzle_README_autotoc_md795}
Tamper with modules to your heart\textquotesingle{}s delight by adding arbitrary code before or after the module\textquotesingle{}s own source code.\hypertarget{md_node_modules_requizzle_README_autotoc_md796}{}\doxysubsection{Mess with child modules}\label{md_node_modules_requizzle_README_autotoc_md796}
When you use \mbox{\hyperlink{classRequizzle}{Requizzle}} to require a module, you can force each child module\textquotesingle{}s {\ttfamily require} method to inherit your changes to the parent module. (By default, only the parent module is changed.)\hypertarget{md_node_modules_requizzle_README_autotoc_md797}{}\doxysection{Will Requizzle break my dependencies?}\label{md_node_modules_requizzle_README_autotoc_md797}
Probably not. It\textquotesingle{}s true that \mbox{\hyperlink{classRequizzle}{Requizzle}} gives you plenty of new and exciting ways to tamper with, and possibly break, your module dependencies. But \mbox{\hyperlink{classRequizzle}{Requizzle}} also tries not to break anything on its own. In particular\+:


\begin{DoxyItemize}
\item {\bfseries{\mbox{\hyperlink{classRequizzle}{Requizzle}} preserves strict-\/mode declarations}}. If a module starts with a strict-\/mode declaration, \mbox{\hyperlink{classRequizzle}{Requizzle}} keeps it in place. Your changes will appear after the strict-\/mode declaration.
\item {\bfseries{\mbox{\hyperlink{classRequizzle}{Requizzle}} leaves native modules alone}}. If you use \mbox{\hyperlink{classRequizzle}{Requizzle}} to load one of Node.\+js\textquotesingle{}s built-\/in modules, such as {\ttfamily fs} or {\ttfamily path}, \mbox{\hyperlink{classRequizzle}{Requizzle}} won\textquotesingle{}t mess with it.
\end{DoxyItemize}\hypertarget{md_node_modules_requizzle_README_autotoc_md798}{}\doxysection{Usage}\label{md_node_modules_requizzle_README_autotoc_md798}
The \mbox{\hyperlink{classRequizzle}{Requizzle}} module exports a single function, which returns a drop-\/in replacement for {\ttfamily require()}.

When you call the function, you must pass in an {\ttfamily options} object, which can include any of these properties\+:


\begin{DoxyItemize}
\item {\ttfamily extras}\+: A pair of functions that return text to insert before or after the module\textquotesingle{}s source code. Each function accepts two parameters\+: {\ttfamily target\+Path}, the path to the required module, and {\ttfamily parent\+Module}, the {\ttfamily Module} object for the module\textquotesingle{}s parent. Each function must return a string.
\begin{DoxyItemize}
\item {\ttfamily extras.\+before}\+: A function that returns text to insert before the module\textquotesingle{}s source code.
\item {\ttfamily extras.\+after}\+: A function that returns text to insert after the module\textquotesingle{}s source code.
\end{DoxyItemize}
\item {\ttfamily infect}\+: Determines whether child modules are infected with the same changes as the parent module. Set to {\ttfamily true} to force child modules to inherit your changes. Defaults to {\ttfamily false}.
\item {\ttfamily require\+Paths}\+: Additional paths to search for required modules. For example, if {\ttfamily require\+Paths} is set to `\mbox{[}'/usr/lib/junk/modules\textquotesingle{}\mbox{]}{\ttfamily , and you save a Java\+Script module at}/usr/lib/junk/modules/mymodule.js{\ttfamily , you can require the module as}mymodule\`{}. \begin{DoxyVerb}You can provide an array of paths, which will be searched before the default
module paths, or an object with the following properties:

+ `requirePaths.before`: An array of paths to search before the default
module paths.
+ `requirePaths.after`: An array of paths to search after the default module
paths. Use this property if you want the module to use its own local
dependencies when possible, then fall back to the additional paths if
necessary.

By default, the require path is not changed.
\end{DoxyVerb}

\end{DoxyItemize}\hypertarget{md_node_modules_requizzle_README_autotoc_md799}{}\doxysection{Examples}\label{md_node_modules_requizzle_README_autotoc_md799}
\`{}\`{}`js const requizzle = require(\textquotesingle{}requizzle');

// Say hello and goodbye to each module. const log\+Require = requizzle(\{ extras\+: \{ before\+: function(target\+Path, parent\+Module) \{ return \textquotesingle{}console.\+log(\char`\"{}\+Hello \%s!\char`\"{}, \textquotesingle{} + target\+Path + \textquotesingle{});~\newline
\textquotesingle{}; \}, after\+: function(target\+Path, parent\+Module) \{ return \textquotesingle{}console.\+log(\char`\"{}\+Goodbye \%s!\char`\"{}, \textquotesingle{} + target\+Path + \textquotesingle{});~\newline
\textquotesingle{}; \} \} \}); // Prints \char`\"{}\+Hello /path/to/mymodule.\+js!\char`\"{} and \char`\"{}\+Goodbye /path/to/mymodule.\+js!\char`\"{} const my\+Module = log\+Require(\textquotesingle{}mymodule\textquotesingle{});

// Look for modules in the current module\textquotesingle{}s {\ttfamily lib} directory, and force child // modules to do the same. const path = require(\textquotesingle{}path\textquotesingle{}); const extra\+Path\+Require = requizzle(\{ infect\+: true, require\+Paths\+: \mbox{[}path.\+join(\+\_\+\+\_\+dirname, \textquotesingle{}lib\textquotesingle{})\mbox{]} \}); // If {\ttfamily foo} needs to require a module in {\ttfamily ./lib}, it can use `require(\textquotesingle{}bar'){\ttfamily  // instead of}require(\textquotesingle{}./lib/bar\textquotesingle{})`. const foo = extra\+Path\+Require('./foo\textquotesingle{}); \`{}\`{}\`{}\hypertarget{md_node_modules_requizzle_README_autotoc_md800}{}\doxysection{Troubleshooting}\label{md_node_modules_requizzle_README_autotoc_md800}
Here are some problems you might run into when you use \mbox{\hyperlink{classRequizzle}{Requizzle}}, along with solutions to each problem. If you run into any problems that aren\textquotesingle{}t addressed here, please file a new issue!\hypertarget{md_node_modules_requizzle_README_autotoc_md801}{}\doxysubsection{Requizzle slowed down my code! A lot!}\label{md_node_modules_requizzle_README_autotoc_md801}
\mbox{\hyperlink{classRequizzle}{Requizzle}} adds minimal overhead to the module-\/loading process. However, your code will run {\itshape much} slower than usual if you do both of the following\+:


\begin{DoxyItemize}
\item Use \mbox{\hyperlink{classRequizzle}{Requizzle}}\textquotesingle{}s {\ttfamily infect} option.
\item Require modules that have a lot of {\ttfamily require()} calls within the scope of individual functions.
\end{DoxyItemize}

If \mbox{\hyperlink{classRequizzle}{Requizzle}} seems to slow down your app, look for module calls that are within function scope, then move them to each module\textquotesingle{}s top-\/level scope.\hypertarget{md_node_modules_requizzle_README_autotoc_md802}{}\doxysubsection{Requizzle made my module do something weird!}\label{md_node_modules_requizzle_README_autotoc_md802}
Do you have any \href{https://nodejs.org/api/modules.html\#modules_cycles}{\texttt{ circular dependencies}} in the modules that aren\textquotesingle{}t working? Circular dependencies can cause unusual behavior with \mbox{\hyperlink{classRequizzle}{Requizzle}}, just as they can without \mbox{\hyperlink{classRequizzle}{Requizzle}}. Try breaking the circular dependency.\hypertarget{md_node_modules_requizzle_README_autotoc_md803}{}\doxysubsection{Requizzle violates the $<$a href=\char`\"{}https\+://en.\+wikipedia.\+org/wiki/\+Law\+\_\+of\+\_\+\+Demeter\char`\"{}$>$\+Law of Demeter$<$/a$>$! It\textquotesingle{}s an unnatural abomination!}\label{md_node_modules_requizzle_README_autotoc_md803}
Fair enough.\hypertarget{md_node_modules_requizzle_README_autotoc_md804}{}\doxysection{Changelog}\label{md_node_modules_requizzle_README_autotoc_md804}

\begin{DoxyItemize}
\item 0.\+2.\+3 (July 2019)\+: Updated dependencies.
\item 0.\+2.\+2 (May 2019)\+: Fixed a compability issue with Node.\+js 12.
\item 0.\+2.\+1 (December 2014)\+: The {\ttfamily require\+Paths} option no longer inserts an extra line break into the source file.
\item 0.\+2.\+0 (June 2014)\+: The {\ttfamily require\+Paths} option can now contain {\ttfamily before} and {\ttfamily after} properties. Paths in the {\ttfamily before} property will be searched first; paths in the {\ttfamily after} property will be searched last.
\item 0.\+1.\+1 (June 2014)\+: If the {\ttfamily require\+Paths} option is used, the module loader now searches the extra paths first rather than last.
\item 0.\+1.\+0 (June 2014)\+: Initial release.
\end{DoxyItemize}\hypertarget{md_node_modules_requizzle_README_autotoc_md805}{}\doxysection{Acknowledgements}\label{md_node_modules_requizzle_README_autotoc_md805}
\mbox{\hyperlink{classRequizzle}{Requizzle}} is very loosely adapted from Johannes Ewald\textquotesingle{}s \href{https://github.com/jhnns/rewire}{\texttt{ rewire}} module, which is designed to modify a module\textquotesingle{}s behavior for unit testing. If \mbox{\hyperlink{classRequizzle}{Requizzle}} doesn\textquotesingle{}t meet your needs, please take a look at rewire!\hypertarget{md_node_modules_requizzle_README_autotoc_md806}{}\doxysection{License}\label{md_node_modules_requizzle_README_autotoc_md806}
\mbox{[}M\+IT license\mbox{]}(L\+I\+C\+E\+N\+SE). 